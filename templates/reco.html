<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì˜¤ëŠ˜ì˜ ì¶”ì²œ Â· ëƒ ëƒ ì´</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root {
      --primary: #4b7cff;
      --primary-soft: #e4edff;
      --accent: #ff7b54;
      --bg: #f6f7fb;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR", "Segoe UI", Roboto, sans-serif;
      background: var(--bg);
      color: #222;
    }

    .page-wrap {
      width: 100%;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 60px 16px 40px;
    }

    .header {
      width: 100%;
      max-width: 1100px;
      text-align: center;
      margin-bottom: 18px;
    }

    .header-title {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .header-sub {
      font-size: 13px;
      color: #666;
    }

    .header-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-top: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--primary-soft);
      color: #3552b8;
      font-size: 12px;
    }

    /* ë¡œë”© ì˜ì—­ */
    #loading {
      margin-top: 32px;
      text-align: center;
      padding: 0 16px;
    }

    .spinner {
      width: 40px;
      height: 40px;
      margin: 0 auto 14px;
      border-radius: 50%;
      border: 4px solid #dde2f2;
      border-top-color: var(--accent);
      animation: spin 0.9s linear infinite;
    }

    #loading-main {
      margin: 0;
      font-size: 14px;
      color: #777;
    }

    .loading-fact {
      margin-top: 10px;
      font-size: 12px;
      color: #999;
      line-height: 1.5;
      min-height: 2.4em;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ */
    #cards {
      display: none; /* ì²˜ìŒì—” ìˆ¨ê¹€ */
      width: 100%;
      max-width: 1100px;
      margin-top: 28px;
      display: flex;
      flex-direction: row;
      gap: 20px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      padding-bottom: 8px;
    }

    #cards::-webkit-scrollbar {
      display: none;
    }

    .card {
      position: relative;
      flex: 0 0 82%;
      max-width: 340px;
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.07);
      overflow: hidden;
      scroll-snap-align: center;
      display: flex;
      flex-direction: column;
    }

    .address {
      font-size: 12px;
      color: #777;
      margin-top: 6px;
      line-height: 1.4;
    }
    .open-info {
      font-size: 11px;
      color: #999;
      margin-top: 2px;
    }

    /* ë°˜ì‘ ì˜¤ë²„ë ˆì´ */
    .reaction-overlay {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.45);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease-out;
    }

    .reaction-overlay.show {
      opacity: 1;
    }

    .reaction-emoji {
      font-size: 40px;
      transform: scale(0.8);
      opacity: 0;
    }

    .reaction-emoji.pop {
      animation: reaction-pop 0.6s ease-out forwards;
    }

    @keyframes reaction-pop {
      0% {
        transform: scale(0.2);
        opacity: 0;
      }
      40% {
        transform: scale(1.6);
        opacity: 1;
      }
      100% {
        transform: scale(1);
        opacity: 0;
      }
    }

    /* ì¸ë„¤ì¼ ì˜ì—­ */
    .thumb {
      width: 100%;
      height: 180px;
      position: relative;
      overflow: hidden;
      background: #f2f3f6;
    }

    .thumb-inner {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: row;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      border-radius: 18px;
    }

    .thumb-inner::-webkit-scrollbar {
      display: none;
    }

    .main-photo {
      flex: 0 0 100%;
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      scroll-snap-align: center;
      transform: scale(1.03);
      user-select: none;
      -webkit-user-drag: none;
    }

    .thumb-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 26px;
      height: 26px;
      border-radius: 999px;
      border: none;
      background: rgba(0, 0, 0, 0.45);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      z-index: 5;
    }

    .thumb-arrow-left {
      left: 8px;
    }

    .thumb-arrow-right {
      right: 8px;
    }

    .thumb-badge {
      position: absolute;
      bottom: 10px;
      left: 12px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
    }

    .card-body {
      padding: 16px 18px 16px;
      display: flex;
      flex-direction: column;
      flex: 1;
    }

    .card-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 6px;
    }

    .badge {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: #f3f4ff;
      color: #4b4f8a;
    }

    .badge.rating {
      background: #fff1d5;
      color: #b26a00;
    }

.menu {
  font-size: 13px;
  color: #444;
  font-weight: 600;
  margin-top: 4px;
  margin-bottom: 10px;   /* âœ… ëŒ€í‘œë©”ë‰´ì™€ íŒŒë€ ê¸€ì”¨ ì‚¬ì´ ì—¬ë°± */
}
    .summary {
      font-size: 12px;
      color: #555;
      margin-bottom: 6px;
      line-height: 1.45;
    }

.reason {
  font-size: 12px;
  color: #2563eb;
  line-height: 1.4;
  margin-top: 4px;
  margin-bottom: 10px;   /* âœ… íŒŒë€ ê¸€ì”¨ì™€ íƒœê·¸ ì‚¬ì´ ì—¬ë°± */
  text-align: center;    /* âœ… ì¤‘ì•™ ì •ë ¬ */
}

.keyword-row {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-bottom: 8px;
  justify-content: center; /* âœ… íƒœê·¸ ì¤‘ì•™ ì •ë ¬ */
}

    .tag {
      font-size: 11px;
      padding: 3px 7px;
      border-radius: 999px;
      background: #ffe9df;
      color: #c0572c;
    }

.kakao-preview {
  font-size: 11px;
  color: #777;
  line-height: 1.4;
  margin-top: 4px;
  text-align: center;      /* âœ… ì˜ì—…ì‹œê°„ê¹Œì§€ ì¤‘ì•™ ì •ë ¬ */
}
    .bottom-actions {
      margin-top: auto;
      padding-top: 10px;
    }

    .btn-row {
      display: flex;
      gap: 6px;
      margin-bottom: 8px;
    }

    .btn {
      flex: 1;
      border-radius: 999px;
      border: none;
      padding: 8px 0;
      font-size: 13px;
      cursor: pointer;
      font-weight: 500;
    }

    .btn-like {
      background: #e9f7ef;
      color: #1e7b3b;
    }

    .btn-dislike {
      background: #fdecec;
      color: #c0392b;
    }

    .btn-map {
      display: block;
      width: 100%;
      text-align: center;
      background: var(--primary);
      color: #fff;
      padding: 10px 0;
      border-radius: 14px;
      font-size: 14px;
      font-weight: 600;
      text-decoration: none;
    }

    .btn:disabled {
      opacity: 0.7;
      cursor: default;
    }

    @media (min-width: 1024px) {
      .page-wrap {
        padding-top: 80px;
      }
      .card {
        flex: 0 0 32%;
        max-width: 360px;
      }
      #cards {
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <div class="header">
      <div class="header-title">ëƒ ëƒ , ì˜¤ëŠ˜ì˜ ë§›ì§‘ ì¶”ì²œğŸš</div>
      <div class="header-sub">ëƒ ëƒ ì´ê°€ ì§ì ‘ ì„ ì •í•œ {{ time }} ë§›ì§‘ ì¶”ì²œ 3ê³³! (ê´‘ê³  ì—†ì´ ê³¨ë¼ë“œë ¤ìš”)</div>
      <div class="header-pill">
        <span>AI ìœ„ì¹˜ ê¸°ë°˜ ì¶”ì²œ</span>
        <span>Â·</span>
        <span>ì¹´ì¹´ì˜¤ë§µÂ·êµ¬ê¸€ë§µ ì—°ë™</span>
      </div>
      <!-- âœ… ìœ„ì¹˜ ì‹¤íŒ¨ ì‹œ ë…¸ì¶œë˜ëŠ” ì•ˆë‚´ ë¬¸êµ¬ -->
      <div id="location-notice"
           style="margin-top: 6px; font-size: 12px; color: #c05621; display: none;">
      </div>
    </div>

    <div id="loading">
      <div class="spinner"></div>
      <p id="loading-main">AIê°€ ì£¼ë³€ ë§›ì§‘ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
      <p id="loading-fact" class="loading-fact"></p>
    </div>

    <div id="cards"></div>
  </div>

  <script>
    const phone = "{{ phone }}";
    const timeOfDay = "{{ time }}";

    const signupLat = "{{ signup_lat|default('') }}";
    const signupLon = "{{ signup_lon|default('') }}";
    const hasSignupLocation = "{{ has_signup_location|default('false') }}";

    const signupLatNum = signupLat === "" ? null : Number(signupLat);
    const signupLonNum = signupLon === "" ? null : Number(signupLon);
    const hasSignupLocationBool = hasSignupLocation === "true";


  
    const loadingEl = document.getElementById("loading");
    const loadingMainEl = document.getElementById("loading-main");
    const loadingFactEl = document.getElementById("loading-fact");
    const cardsEl = document.getElementById("cards");
    const locationNoticeEl = document.getElementById("location-notice");

    const funFacts = [
      "í•œêµ­ì¸ì€ 1ë…„ì— ë¼ë©´ì„ 1ì¸ë‹¹ 70ê°œ ì´ìƒ ë¨¹ëŠ”ë‹¤ê³  ì•Œë ¤ì ¸ ìˆì–´ìš”.",
      "ì§œì¥ë©´ì€ ì¤‘êµ­ ë³¸í† ë³´ë‹¤ í•œêµ­ì—ì„œ ë” ë°œì „í•œ 'ì¤‘í™”ìš”ë¦¬' ë©”ë‰´ì˜ˆìš”.",
      "ê¹€ì¹˜ëŠ” ì„¸ê³„ 5ëŒ€ ê±´ê°•ì‹ìœ¼ë¡œ ìì£¼ ì–¸ê¸‰ë˜ëŠ” ëŒ€í‘œ ë°œíš¨ ìŒì‹ì…ë‹ˆë‹¤.",
      "ë¼ë©´ ë©´ë°œì´ ë…¸ë€ìƒ‰ì¸ ê±´ ë‹¬ê±€ ë•Œë¬¸ì´ ì•„ë‹ˆë¼ ë°€ê°€ë£¨ì™€ ìœ í™”ì œì˜ ìƒ‰ì´ì—ìš”.",
      "ëœì¥ì°Œê°œì™€ ê¹€ì¹˜ì°Œê°œëŠ” ì‹¤ì œë¡œ í•œêµ­ì¸ì´ ê°€ì¥ ìì£¼ ë¨¹ëŠ” ì§‘ë°¥ ë©”ë‰´ ìƒìœ„ê¶Œì´ì—ìš”.",
      "ì§œê¸€ì´Â·ì „ê³¨ë¥˜ëŠ” ë°¥ë°˜ì°¬ì´ë©´ì„œë„ ì•ˆì£¼ë¡œë„ ì‚¬ë‘ë°›ëŠ” í•œêµ­ì‹ 'í•˜ì´ë¸Œë¦¬ë“œ' ë©”ë‰´ì…ë‹ˆë‹¤.",
      "êµ­ë°¥ ì§‘ì—ì„œ 'ë§ì•„ì£¼ì„¸ìš”'ë¼ê³  í•˜ë©´ ë°¥ê³¼ êµ­ì„ ë¯¸ë¦¬ ì„ì–´ì£¼ëŠ” ì˜›ë‚  ë°©ì‹ ì£¼ë¬¸ì´ì—ìš”."
    ];

    let factTimer = null;

    function setLoadingText(text) {
      if (loadingMainEl) {
        loadingMainEl.innerText = text;
      }
    }

    function startFunFacts() {
      if (!loadingFactEl || funFacts.length === 0) return;

      let idx = 0;
      loadingFactEl.innerText = funFacts[idx];

      factTimer = setInterval(() => {
        idx = (idx + 1) % funFacts.length;
        loadingFactEl.innerText = funFacts[idx];
      }, 4000);
    }

    function stopFunFacts() {
      if (factTimer) {
        clearInterval(factTimer);
        factTimer = null;
      }
    }

    document.addEventListener("DOMContentLoaded", start);

    function start() {
      console.log("[RECO] start() / phone =", phone, "/ time =", timeOfDay);
      startFunFacts();

      if (!navigator.geolocation) {
        console.warn("[RECO] navigator.geolocation NOT supported");
        useSignupOrDefaultLocation("NOT_SUPPORTED");
        return;
      }

      let called = false;

      function go(lat, lon, source) {
        if (called) return;
        called = true;
        console.log("[RECO] go() lat =", lat, "lon =", lon, "source =", source);
        fetchReco(lat, lon, source);
      }

      function useSignupOrDefaultLocation(reason) {
        console.warn("[RECO] fallback to signup/default. reason =", reason);

        if (hasSignupLocation && signupLat !== null && signupLon !== null) {
          if (locationNoticeEl) {
            locationNoticeEl.style.display = "block";
            locationNoticeEl.innerText =
              "í˜„ì¬ ìœ„ì¹˜ ì •ë³´ ìˆ˜ì§‘ì— ì‹¤íŒ¨í•˜ì—¬, ì‹ ì²­ ì‹œ ì„¤ì •í•˜ì‹  ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ ë§›ì§‘ì„ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤. " +
              "ë¸Œë¼ìš°ì €ì—ì„œ ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•´ ì£¼ì‹œë©´ ë” ì •í™•í•œ ì¶”ì²œì„ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆì–´ìš”.";
          }
          setLoadingText("ì‹ ì²­ ì‹œ ì„¤ì •í•œ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ ì£¼ë³€ ë§›ì§‘ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...");
          go(signupLat, signupLon, "signup");
        } else {
          if (locationNoticeEl) {
            locationNoticeEl.style.display = "block";
            locationNoticeEl.innerText =
              "í˜„ì¬ ìœ„ì¹˜ ì •ë³´ ìˆ˜ì§‘ì— ì‹¤íŒ¨í–ˆê³ , ì‹ ì²­ ì‹œ ì„¤ì •í•œ ìœ„ì¹˜ê°€ ì—†ì–´ ê¸°ë³¸ ì§€ì—­ ê¸°ì¤€ìœ¼ë¡œ ë§›ì§‘ì„ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤. " +
              "ë¸Œë¼ìš°ì €ì—ì„œ ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•´ ì£¼ì‹œë©´ ë” ì •í™•í•œ ì¶”ì²œì„ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆì–´ìš”.";
          }
          setLoadingText("ê¸°ë³¸ ì§€ì—­ ê¸°ì¤€ìœ¼ë¡œ ì£¼ë³€ ë§›ì§‘ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...");
          go(33.462046, 126.329235, "default");
        }
      }

      try {
        navigator.geolocation.getCurrentPosition(
          (pos) => {
            console.log("[RECO] geolocation SUCCESS", {
              lat: pos.coords.latitude,
              lon: pos.coords.longitude,
              accuracy: pos.coords.accuracy,
            });
            go(pos.coords.latitude, pos.coords.longitude, "gps");
          },
          (err) => {
            console.error("[RECO] geolocation ERROR", {
              code: err.code,
              message: err.message,
            });
            useSignupOrDefaultLocation("ERROR_" + err.code);
          },
          {
            enableHighAccuracy: true,
            timeout: 7000,
            maximumAge: 600000,
          }
        );
      } catch (e) {
        console.error("[RECO] geolocation EXCEPTION", e);
        useSignupOrDefaultLocation("EXCEPTION");
      }

      setTimeout(() => {
        if (!called) {
          console.warn("[RECO] geolocation TIMEOUT 8s");
          useSignupOrDefaultLocation("TIMEOUT_8S");
        }
      }, 8000);
    }

    function fetchReco(lat, lon, source) {
      setLoadingText("ì£¼ë³€ ë§›ì§‘ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...");
      cardsEl.style.display = "none";
      cardsEl.innerHTML = "";

      fetch("/api/reco", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          phone: phone,
          time: timeOfDay,
          lat: lat,
          lon: lon,
          source: source || "unknown",
        }),
      })
        .then((r) => {
          if (!r.ok) throw new Error("ì„œë²„ ì˜¤ë¥˜: " + r.status);
          return r.json();
        })
        .then(showCards)
        .catch((err) => {
          console.error("[RECO] API ì˜¤ë¥˜:", err);
          setLoadingText("ì¶”ì²œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        });
    }

    function showCards(data) {
      console.log("[RECO] ê²°ê³¼:", data);

      if (!Array.isArray(data) || data.length === 0) {
        setLoadingText("ê·¼ì²˜ ì¶”ì²œ ë§›ì§‘ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
        stopFunFacts();
        cardsEl.style.display = "none";
        return;
      }

      loadingEl.style.display = "none";
      stopFunFacts();

      cardsEl.style.display = "flex";
      cardsEl.innerHTML = "";

      data.forEach((item) => {
        const card = document.createElement("div");
        card.className = "card";

        const ratingText =
          item.rating && item.rating.toFixed
            ? item.rating.toFixed(1)
            : (item.rating || "-");

        const distanceText =
          item.distance_km != null ? `ì•½ ${item.distance_km}km` : "";

        const keywords = (item.keywords || [])
          .map((k) => `<span class="tag">#${k}</span>`)
          .join(" ");

        const mainImage =
          (item.images && item.images.length && item.images[0]) ||
          item.image_url ||
          "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/thumnail.png";

        const images =
          (item.images && item.images.length > 0)
            ? item.images
            : [mainImage];

        const kakaoLines = [];
        if (item.address) kakaoLines.push("ğŸ“ " + item.address);
        if (item.open_info) kakaoLines.push("â° " + item.open_info);
        const kakaoInfo =
          kakaoLines.join("<br>") ||
          "ì¹´ì¹´ì˜¤ë§µì—ì„œ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.";

        const mapUrl =
          "/go?phone=" +
          encodeURIComponent(phone || "") +
          "&time=" +
          encodeURIComponent(timeOfDay || "") +
          "&rid=" +
          encodeURIComponent(item.restaurant_id || "") +
          "&place_id=" +
          encodeURIComponent(item.place_id || "") +
          "&name=" +
          encodeURIComponent(item.name || "");

        card.innerHTML = `
          <div class="reaction-overlay">
            <div class="reaction-emoji">ğŸ˜†</div>
          </div>

          <div class="thumb">
            <div class="thumb-inner">
              ${images
                .map(
                  (src) =>
                    `<img class="main-photo" src="${src}" alt="${item.name || ''}">`
                )
                .join("")}
            </div>
            ${distanceText ? `<div class="thumb-badge">${distanceText}</div>` : ""}
          </div>

          <div class="card-body">
            <div class="card-title">${item.name || ""}</div>
            <div class="badge-row">
              <span class="badge">${item.category || "ê¸°íƒ€"}</span>
              ${ratingText !== "-" ? `<span class="badge rating">â˜… ${ratingText}</span>` : ""}
            </div>
            <div class="menu">ëŒ€í‘œ ë©”ë‰´: ${item.menu || "ì •ë³´ ì—†ìŒ"}</div>
            <div class="summary">${item.summary || ""}</div>
            ${item.reason ? `<div class="reason">${item.reason}</div>` : ""}
            <div class="keyword-row">
              ${keywords}
            </div>
            <div class="kakao-preview">
              ${kakaoInfo}
            </div>
            <div class="bottom-actions">
              <div class="btn-row">
                <button class="btn btn-like">ğŸ‘ ì¢‹ì•„ìš”</button>
                <button class="btn btn-dislike">ğŸ‘ ë³„ë¡œì˜ˆìš”</button>
              </div>
              <a class="btn-map" href="${mapUrl}" target="_blank">ì¹´ì¹´ì˜¤ë§µìœ¼ë¡œ ì´ë™</a>
            </div>
          </div>
        `;

        cardsEl.appendChild(card);

        const likeBtn = card.querySelector(".btn-like");
        const dislikeBtn = card.querySelector(".btn-dislike");

        likeBtn.addEventListener("click", () =>
          sendQuickFeedback(item, true, likeBtn, dislikeBtn, card)
        );
        dislikeBtn.addEventListener("click", () =>
          sendQuickFeedback(item, false, likeBtn, dislikeBtn, card)
        );
      });
    }

    function sendQuickFeedback(item, isLike, likeBtn, dislikeBtn, cardEl) {
      console.log("[FEEDBACK] sendQuickFeedback", item.name, isLike);

      const overlay = cardEl.querySelector(".reaction-overlay");
      const emoji = cardEl.querySelector(".reaction-emoji");
      if (overlay && emoji) {
        overlay.classList.add("show");
        emoji.classList.add("pop");
        setTimeout(() => {
          overlay.classList.remove("show");
          emoji.classList.remove("pop");
        }, 650);
      }

      const nextCard = cardEl.nextElementSibling;
      if (nextCard) {
        setTimeout(() => {
          nextCard.scrollIntoView({ behavior: "smooth", inline: "center", block: "nearest" });
        }, 300);
      }

      fetch("/api/quick-feedback", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          phone: phone,
          restaurant_name: item.name,
          category: item.category,
          is_good: isLike,
          time_of_day: timeOfDay,
          restaurant_id: item.restaurant_id,
        }),
      })
        .then((r) => r.json())
        .then((res) => {
          if (res && res.result === "ok") {
            if (isLike) {
              likeBtn.innerText = "ğŸ‘ ë°˜ì˜ë¨";
            } else {
              dislikeBtn.innerText = "ğŸ‘ ë°˜ì˜ë¨";
            }
            likeBtn.disabled = true;
            dislikeBtn.disabled = true;
          } else {
            alert("í”¼ë“œë°± ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
          }
        })
        .catch((err) => {
          console.error("[QUICK_FEEDBACK_ERROR]", err);
          alert("í”¼ë“œë°± ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        });
    }
  </script>
</body>
</html>
